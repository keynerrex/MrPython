{% extends 'base/web_total.html' %}
{% from '_macro_formularios.html' import renderizar %}

{% block content %}

<div class="container">
  <script type="text/javascript" src="{{ url_for('static', filename='js/jquery.js') }}"></script>

  <div class="table-responsive">
    <table class="table table-success table-striped">
      <thead>
        <tr>
          <th scope="col">N°</th>
          <th scope="col">Usuario</th>
          <th scope="col">Comentario</th>
          <th scope="col">Fecha</th>
        </tr>
      </thead>

  <div id="comments-table" style="display: none;">
    <div class="table-responsive">
      <table class="table table-success table-striped">
        <thead>
          <tr>
            <th scope="col">N°</th>
            <th scope="col">Usuario</th>
            <th scope="col">Comentario</th>
            <th scope="col">Fecha</th>
          </tr>
        </thead>
        <tbody>
          {% for comment in my_comments.items %}
          <tr>
            <td>{{ (my_comments.page - 1) * my_comments.per_page + loop.index }}</td>
            <td>{{ comment.username }}</td>
            <td class="comment-cell">{{ comment.comment }}</td>
            <td class="comment-cell">{{ formatted_comments[loop.index0] }}</td>
          </tr>
          {% endfor %}
        </tbody>
    </table>
  </div>

  <div class="pagination pagination-custom" style="display: none">
    <div class="pagination-buttons">
      {% if my_comments.has_prev %}
      <a class="btn btn-primary" href="{{ url_for('comments.my_comments', page=my_comments.prev_num) }}">Atrás</a>
      {% endif %}
    </div>

    <div class="current-page-container" >
      <span class="current-page">{{ my_comments.page }}</span>
    </div>

    <div class="pagination-buttons pagination-right" >
      {% if my_comments.has_next %}
      <a class="btn btn-primary next-button" href="{{ url_for('comments.my_comments', page=my_comments.next_num) }}">Siguiente</a>
      {% endif %}
    </div>
  </div>
</div>
<script>
  $(document).ready(function() {
    // Oculta la pantalla de carga
    $('#loading').fadeOut(function() {
        // Esta función se ejecutará después de que termine la animación de la pantalla de carga
        $('#comments-table').show();
        $('.pagination-custom').show(); // Muestra los botones de paginación
    });
});
</script>
{% endblock %}
